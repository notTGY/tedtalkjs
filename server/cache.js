(()=>{var w=Symbol();function T(e,n,...o){return e===w?o:typeof e=="function"?e({...n,children:o}):{...n,elem:e,children:o}}var z=(e,n)=>{let o={$el:e,elem:e.nodeName.toLowerCase()},r,s=()=>{e.innerHTML="",o=d({},n(),e)},d=(c,i,p)=>{Array.isArray(i)&&(i={children:i}),typeof i=="string"&&(i={innerText:i}),i.elem=i.elem||"span",!c||c.elem!==i.elem?(i.$el=document.createElement(i.elem),p.append(i.$el)):(i.$el=c.$el,i.cleanup=c.cleanup);let{$el:a,elem:u,children:L,cleanup:q,...x}=i;if(q)for(let l in q)a.removeEventListener(l.substring(2),i.cleanup[l]);i.cleanup={};for(let l in x)typeof(r=x[l])>"u"||(l.indexOf("on")!=0?a[l]=r:a.addEventListener(l.substring(2),i.cleanup[l]=b=>{x[l](b)}));return L?{...i,children:L.map((l,b)=>d(c&&c.children&&c.children[b],l,a))}:i};return s(),s},t={frag:w,dom:T,init:z};var m=io(),S=null;if(typeof window<"u"&&window.localStorage)try{let e=window.localStorage.getItem("user-data");S=JSON.parse(e)}catch{}var g=()=>S,h=e=>{if(typeof window<"u"&&window.localStorage){let n=JSON.stringify(e);window.localStorage.setItem("user-data",n)}S=e},I=null,v=null;if(typeof document<"u"&&document.location){let e=new URLSearchParams(document.location.search);I=e.get("r"),v=e.get("p")}var O=()=>I,H=e=>{I=e},Y=()=>v,k=e=>{v=e},P;if(v!==null){let e=g();e.ondevice&&(P=e.ondevice[presentation])}var j=()=>{},f=null,Q=e=>{m.emit("create-room"),f=null,j=e};m.on("room-created",(e,n)=>{j(e,n),f=n});var A=()=>{},_=e=>{A=e};m.on("data-received",e=>{let n=g()??{rooms:{}},o=n.rooms,r={};r[f]=e.slideData;let s={...o,...r},d={...n,rooms:s,curSlide:e.curSlide};h(d),H(f),A(e)});var J=()=>{},U=e=>{J=e};m.on("go-to-slide",e=>{let o={...g()??{},curSlide:P.curSlide};h(o),J(e)});var G={createRoom:Q,onDataReceived:_,onSlideChanged:U};function y(){return{getPresentationId:Y,setPresentationId:k,getRoomId:O,setRoomId:H,getStored:g,setStored:h,socketHooks:G}}function C(e){return t.dom("div",{id:"background-container"},t.dom("div",{id:"background1"}),t.dom("div",{id:"background2"}),t.dom("div",{id:"background3"}))}function K(e){let n=document.getElementById("qrcode"),o=n.getContext("2d");o.imageSmoothingEnabled=!1;let r=e.modules,s=r.length;n.width=n.height=s+2;let d=o.createImageData(s,s);r.forEach((c,i)=>{c.forEach((p,a)=>{let u=4*(i*s+a);d.data[u]=0,d.data[u+1]=0,d.data[u+2]=0,d.data[u+3]=p*255})}),o.putImageData(d,1,1)}function $(e){let{children:n,width:o,qrcode:r}=e,s=`width: ${o}px; height: ${o}px`,d=`width: ${o*.4}px; height: ${o*.4}px;position: relative; top: ${-o*.75}; left: ${o*.3}`;return r&&setTimeout(()=>K(r),100),{elem:"div",style:s,children:[t.dom("img",{style:s,src:"/assets/pres.svg"}),t.dom("canvas",{style:d,id:"qrcode"})]}}function B(e){return{className:`full-center ${e.className}`,children:e.children}}function R(e){let{type:n,width:o,height:r,color:s}=e,d=`background: linear-gradient(155deg, #0000, #0001), ${s};`;return{elem:"button",className:`button-${n}`,style:`width:${o};height:${r};${d}`,...e}}function D(e){let{children:n,className:o}=e,r=`claycard ${o}`;return{elem:"div",className:"card-container",children:[{elem:"div",className:r,children:n}]}}var E=null;function V(){return t.dom(R,{type:"pill",color:"#45ef45"},t.dom("div",{style:"display:flex;color:#efe;font-size:1.2rem;align-items:center;"},t.dom("div",{style:"border-radius:100%;border:2px solid #efe;width:16px;height:16px;vertical-align:center;margin-right:4px;"}),"create"))}function W(){return t.dom("h1",{style:"margin:1rem;margin-top:1.5rem;"},"Metaslides")}function N(e){let{rerender:n,LandingContext:o}=e;return E===null&&(o.socketHooks.createRoom((r,s)=>{console.log(s),E=r,n()}),o.socketHooks.onDataReceived(n)),t.dom("div",{id:"root"},t.dom(C,null),t.dom("div",{id:"app-container",style:"font-family:Arial;color:412B2B;overflow:auto;"},t.dom("div",{style:"display: flex;justify-content:space-between;"},t.dom(W,null),t.dom("div",{style:"margin:1rem;"},t.dom(V,null))),t.dom(D,{style:"margin-top:1rem;"},t.dom("p",null,"\u{1F30C} Metaslides is a metaverse platform for giving "," ",t.dom("u",null,"collaborative standup talks"),"."),t.dom("p",null,"\u{1FA82} It replaces traditional presentation and "," ",t.dom("u",null,"enriches its' experience")," "," ","by giving everyone ability participate."),t.dom("p",null,"\u{1F3D7}\uFE0F You can "," ",t.dom("u",null,"add behaviours yourself")," "," ","from building blocks like button, choice or text input. Make anonymous polls and receive results over email."),t.dom("p",null,"\u{1F680} fast and simple. "," ",t.dom("u",null,"No rocket science involved"),". You just type text and see changes in real time."),t.dom("p",{style:"margin-top:2rem;"},"To create your own interactive experience scan QR code, or press ",t.dom("b",null,"Create")," button.")),t.dom(B,{style:"margin-top:3rem;"},t.dom($,{width:320,qrcode:E}))))}var M,{getPresentationId:X,setPresentationId:Be,getRoomId:Z,setRoomId:Re,getStored:De,setStored:Ee,socketHooks:F}=y(),ee=()=>{let e=Z(),n=X();return e!==null&&n===null?t.dom("div",{id:"root"},"Joined as a viewer"):e===null&&n!==null?t.dom("div",{id:"root"},"Editing presentation without presenting"):e!==null&&n!==null?t.dom("div",{id:"root"},"Presenting. You are presenter"):N({rerender:()=>M(),LandingContext:{socketHooks:F}})};M=t.init(document.getElementById("root"),ee);})();
